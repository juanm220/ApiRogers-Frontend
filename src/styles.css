/* =============================================================
   Hawking UI — Compact System CSS (v2)
   Base → Components → Utilities. Mantiene tus clases existentes.
   ============================================================= */

/* -------------------- TOKENS -------------------- */
:root{
  /* Palette */
  --bg:#f5f7fb; --surface:#fff; --surface-2:#f0f4fa;
  --brand:#2563eb; --brand-600:#1d4ed8; --brand-700:#1e40af;
  --text:#0b1324; --muted:#64748b;
  --ok:#0b6e4f; --warn:#f59e0b; --danger:#ef4444; --info:#0ea5e9;
  --thead-bg:#eef4ff; --row-hover:#f7fbff; --border:#e5e7eb;
  --shadow:0 2px 5px rgba(0,0,0,.08); --radius:10px;
  /* Scales */
  --space-1:.25rem; --space-2:.5rem; --space-3:.75rem;
  --space-4:1rem; --space-5:1.25rem; --space-6:1.5rem;
  --fs-body:clamp(15px,1.6vw + .5rem,18px); --lh-body:1.45;
  --focus-ring:0 0 0 4px rgba(37,99,235,.25);
}

/* =============================================================
   LAYERS
   ============================================================= */
@layer base, components, utilities;

/* -------------------- BASE -------------------- */
@layer base{
  /* iOS font zoom quirks */
  html{ -webkit-text-size-adjust:100%; text-size-adjust:100%; }
  html,body{ height:100%; }
  body{
    margin:0; background:var(--bg); color:var(--text);
    font: normal var(--fs-body)/var(--lh-body) Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans","Liberation Sans", sans-serif;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  h1,h2,h3,h4{ color:var(--brand-700); margin:0 0 var(--space-3); }
  h1{ font-size:1.875rem; }
  h2{ font-size:1.5rem; }
  h3{ font-size:1.25rem; }
  h4{ font-size:1.125rem; }

  /* Layout root flex (footer siempre al fondo) */
  #root{ min-height:calc(var(--vh, 1vh) * 100); display:flex; flex-direction:column; }
  .main-container{ max-width:1200px; margin:0 auto; padding:var(--space-6); flex:1 0 auto; }

  /* Forms */
  input[type="text"],input[type="number"],input[type="date"],select{
    width:100%; height:38px; padding:0 10px; background:#fff; color:var(--text);
    border:1px solid var(--border); border-radius:8px; font:inherit;
    transition:border-color .12s ease, box-shadow .12s ease;
  }
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button{ -webkit-appearance:none; margin:0; }
  input:focus,select:focus{ outline:none; border-color:var(--brand); box-shadow:0 0 0 3px rgba(37,99,235,.20); }

  /* Tablas base (excel-like) */
  table{
    width:100%; border-collapse:collapse; margin-top:var(--space-4);
    background:var(--surface); color:var(--text); box-shadow:var(--shadow);
  }
  thead th{
    background:var(--thead-bg); color:#0b1324; font-weight:700; text-align:left;
    border-bottom:1px solid var(--border); padding:10px; position:sticky; top:0; z-index:1;
  }
  th,td{ border:1px solid var(--border); padding:10px; }
  tbody tr:nth-child(even) td{ background:#fbfdff; }
  tbody tr:hover td{ background:var(--row-hover); }

  /* Navegación */
  .navbar a{ color:#fff; text-decoration:none; }
  button, a, .nav-link, .chip-radio, .nav-btn { touch-action: manipulation; }
}

/* -------------------- COMPONENTS -------------------- */
@layer components{
  /* Navbar */
  .navbar{
    display:flex; align-items:center; gap:12px;
    background:linear-gradient(135deg, var(--brand-700), var(--brand-600));
    padding:.75rem 1.25rem; color:#fff; box-shadow:var(--shadow); position:relative;
  }
  .brand{ display:flex; align-items:center; gap:10px; color:#fff; text-decoration:none; }
  .brand-title{ margin:0; color:#fff; font-size:1.35rem; font-weight:800; letter-spacing:.2px; }
  .brand-mark{ width:10px; height:20px; border-radius:2px; background:#fff; box-shadow:0 0 18px rgba(255,255,255,.45); }
  .nav-right{ margin-left:auto; display:flex; gap:10px; align-items:center; }

  .nav-link{
    color:#fff; padding:.45rem .75rem; border-radius:9999px; border:1px solid transparent; font-weight:600;
    transition: background .12s ease, border-color .12s ease;
  }
  .nav-link:hover{ background:rgba(255,255,255,.10); border-color:rgba(255,255,255,.18); }
  .nav-link.active{ background:#fff; color:var(--brand-700); border-color:#fff; }

  .nav-select{
    height:36px; padding:0 .6rem; border-radius:9999px; border:1px solid rgba(255,255,255,.35);
    background:rgba(255,255,255,.08); color:#000; backdrop-filter:blur(2px);
  }
  .nav-select:focus{ outline:none; box-shadow:0 0 0 3px rgba(255,255,255,.25); border-color:#fff; }

  .nav-btn{
    height:36px; padding:0 .9rem; border-radius:9999px; border:1px solid rgba(255,255,255,.55);
    background:#fff; color:var(--brand-700); font-weight:700; cursor:pointer;
  }
  .nav-btn:hover{ filter:brightness(.98); }
  .nav-btn--danger{ background:#e53935; color:#fff; border:0; }
  .nav-btn--danger:hover{ background:#d32f2f; }
  .nav-btn--danger:active{ background:#c62828; }

  /* Hamburger / Mobile menu */
  .nav-toggle{
    display:none; margin-left:auto; background:transparent; border:1px solid rgba(255,255,255,.45);
    border-radius:10px; height:36px; padding:0 10px; color:#fff; align-items:center; gap:6px;
  }
  .nav-toggle:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(255,255,255,.25); }
  .nav-toggle-bar{ display:block; width:18px; height:2px; background:#fff; }
  .nav-toggle-bar + .nav-toggle-bar{ margin-top:3px; }

  .mobile-menu{
    display:none; position:fixed; top:0; right:0; bottom:0;
    width:86%; max-width:380px; background:#fff; transform:translateX(100%);
    transition:transform .25s ease; z-index:1000; display:flex; flex-direction:column; padding-top:env(safe-area-inset-top);
    height:calc(var(--vh) * 100);
  }
  .mobile-menu.is-open{ transform:translateX(0); }
  .mobile-menu-inner{
    padding:16px; padding-bottom:88px; overflow-y:auto; -webkit-overflow-scrolling:touch;
    gap:8px; display:flex; flex-direction:column;
  }
  .mobile-menu .nav-link{ color:var(--brand-700); font-weight:700; padding:.55rem .75rem; border-radius:8px; border:1px solid transparent; }
  .mobile-menu .nav-link:hover{ background:var(--row-hover); border-color:var(--border); }
  .mobile-control{ display:grid; gap:6px; }
  .mobile-label{ font-size:.88rem; color:var(--muted); font-weight:600; }
  .mobile-footer{
    position:sticky; bottom:0; padding:12px 16px env(safe-area-inset-bottom) 16px;
    background:linear-gradient(to top, rgba(255,255,255,.95), rgba(255,255,255,.9), rgba(255,255,255,.85));
    border-top:1px solid #e9e9e9;
  }
  .mobile-logout{ width:100%; padding:12px 16px; font-size:16px; font-weight:700; border-radius:12px; }
  .mobile-backdrop{ display:none; position:fixed; inset:0; z-index:999; background:rgba(0,0,0,.42); border:0; }

  /* Cards */
  .card{ background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:var(--space-4); box-shadow:var(--shadow); }

  /* Buttons (genéricos) */
  button,.btn{
    cursor:pointer; background:var(--brand); color:#fff; border:1px solid var(--brand);
    border-radius:8px; padding:.5rem .9rem; font-size:.95rem; line-height:1;
    transition: background-color .18s, border-color .18s, box-shadow .12s, transform .06s ease;
  }
  button:hover,.btn:hover{ background:var(--brand-600); border-color:var(--brand-600); }
  button:active,.btn:active{ transform:translateY(1px); }
  button:focus-visible,.btn:focus-visible{ outline:none; box-shadow:var(--focus-ring); }
  .btn--secondary{ background:#fff; color:var(--brand-700); border-color:var(--border); }
  .btn--secondary:hover{ border-color:var(--brand-600); color:var(--brand-600); }
  .btn--success{ background:var(--ok); border-color:var(--ok); }
  .btn--warn{ background:var(--warn); border-color:var(--warn); color:#111; }
  .btn--ghost{ background:transparent; color:var(--brand-700); border:1px dashed var(--border); }
  .btn--icon{ padding:.45rem; width:36px; height:36px; display:inline-grid; place-items:center; }

  /* Custom number input */
  .custom-number-input{ display:inline-flex; align-items:center; gap:6px; }
  .custom-input-field{
    width:72px; text-align:center; padding:6px 8px; border:1px solid #cfcfcf; border-radius:8px; font-weight:600; height:38px;
  }
  .custom-input-field:focus{ outline:none; box-shadow:0 0 0 2px rgba(64,132,255,.25); }
  .minus-btn,.plus-btn{
    border:1px solid #3352fc; border-radius:8px; padding:4px 10px; font-weight:700; cursor:pointer; background:#12213f; color:#fff;
    width:36px; height:36px; font-size:1.1rem;
  }
  .minus-btn:active,.plus-btn:active{ transform:translateY(1px); }

  /* Footer (fluido) */
  .site-footer{
    margin-top:auto;
    padding-block: clamp(16px, 2.5vh, 32px);
    padding-inline: clamp(12px, 2vw, 24px);
    background:linear-gradient(135deg, var(--brand-700), var(--brand-600));
    color:#fff; box-shadow:var(--shadow); border-top:1px solid rgba(255,255,255,.12);
  }
  .footer-inner{ max-width:1200px; margin:0 auto; display:grid; row-gap: clamp(6px, 1.2vh, 12px); }
  .footer-brand{ display:inline-flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.25px; }
  .footer-brand .brand-mark{ width:10px; height:20px; border-radius:2px; background:#fff; box-shadow:0 0 18px rgba(255,255,255,.45); }
  .footer-meta{ margin-top:4px; font-size:clamp(.9rem, .8rem + .3vw, 1rem); opacity:.92; display:flex; gap:8px; flex-wrap:wrap; }
  .footer-meta .sep{ opacity:.6; }
}

/* -------------------- UTILITIES -------------------- */
@layer utilities{
  .num{ text-align:right; font-variant-numeric: tabular-nums; }
  .table--dense th, .table--dense td{ padding:6px 8px; }

  .progress{ position:relative; width:100%; height:12px; border-radius:9999px; background:#eef1f5; overflow:hidden; }
  .progress .progress-bar{ position:relative; height:100%; border-radius:9999px; transition:width 180ms ease-out; }
  .progress .progress-bg{ position:absolute; inset:0; opacity:.14; pointer-events:none; }

  .flex-row{ display:flex; align-items:center; gap:8px; }
  .push-right{ margin-left:auto; }
  .hidden{ display:none !important; }

  .safe-pads{
    padding-left:max(1rem, env(safe-area-inset-left));
    padding-right:max(1rem, env(safe-area-inset-right));
    padding-bottom:max(.75rem, env(safe-area-inset-bottom));
  }

  /* Responsive tables helpers (no duplicados) */
  .table-wrap{ width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch; }
  .table-wrap--shadow{ position:relative; }
  .table-wrap--shadow::before,
  .table-wrap--shadow::after{
    content:""; position:sticky; top:0; bottom:0; width:16px; pointer-events:none; z-index:1;
  }
  .table-wrap--shadow::before{ left:0; background:linear-gradient(to right, rgba(0,0,0,.08), rgba(0,0,0,0)); }
  .table-wrap--shadow::after{ float:right; right:0; background:linear-gradient(to left, rgba(0,0,0,.08), rgba(0,0,0,0)); }

  /* Excel-like preset para quien lo use como clase específica */
  .table-excel{ width:100%; border-collapse:collapse; background:#fff; }
  .table-excel th, .table-excel td{ border:1px solid var(--border); padding:6px 8px; }
  .table-excel thead th{ background: var(--thead-bg); font-weight:700; text-align:left; position:sticky; top:0; z-index:1; }
  .table-excel .num{ text-align:right; font-variant-numeric:tabular-nums; }
  .table-excel tbody tr:nth-child(even) td{ background:#fcfdff; }

  /* Auth helpers */
  .auth-page{
    min-height:100vh; display:grid; place-items:center; padding:24px;
    background: radial-gradient(1200px 700px at 20% 10%, #12213f 0%, transparent 60%),
                radial-gradient(900px 600px at 80% 90%, #1b2c55 0%, transparent 60%),
                linear-gradient(160deg, #0b1020, #0f2856);
  }
  .login-container{
    width:100%; max-width:420px; background:#fff; color:var(--text);
    border-radius:16px; padding:28px; box-shadow:0 10px 20px rgba(0,0,0,.25), 0 1px 3px rgba(0,0,0,.15);
    border:1px solid rgba(255,255,255,.06); backdrop-filter: blur(2px);
  }
  .form-group{ display:grid; gap:6px; margin-bottom:16px; }
  .login-btn{
    width:100%; height:46px; border:none; border-radius:10px; background:var(--brand); color:#fff; font-weight:700; letter-spacing:.3px; margin-top:6px;
    transition: transform 60ms ease, background-color 120ms ease, box-shadow 120ms ease; box-shadow:0 8px 18px rgba(37,99,235,.35); cursor:pointer;
  }
  .login-btn:hover{ background:var(--brand-600); }
}

/* -------------------- RESPONSIVE -------------------- */
@media (max-width:1024px){
  .main-container{ max-width:100%; padding:1.25rem; }
  h1{ font-size:1.65rem; } h2{ font-size:1.35rem; } h3{ font-size:1.15rem; }
}
@media (max-width:820px){
  .nav-toggle{ display:inline-flex; }
  .nav-right{ display:none; }
  .mobile-menu.is-open{ display:flex; }
  .mobile-backdrop{ display:block; }
}
@media (max-width:640px){
  html,body{ font-size:16px; line-height:1.4; }
  .main-container{ padding:.9rem; }
  h1{ font-size:1.4rem; } h2{ font-size:1.2rem; } h3{ font-size:1.05rem; }


  .card{ padding:.85rem; border-radius:12px; }
  button,.btn{ min-height:44px; padding:.6rem .9rem; font-size:1rem; margin: 2px; }
  .btn--icon{ width:44px; height:44px; }
  input[type="text"],input[type="number"],input[type="date"],select{ height:44px; font-size:1rem; }
  .custom-input-field{ height:44px; }
  .minus-btn,.plus-btn{ width:44px; height:44px; font-size:1.2rem; }
}

/* Tablas: scroll seguro en pantallas estrechas */
@media (max-width:900px){
  table{ display:block; width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch; }
  thead th{ position:sticky; top:0; }
  th,td{ white-space:nowrap; min-width:120px; }
  .table--dense th,.table--dense td{ min-width:96px; }
}

/* Safe-area iOS */
@supports(padding:max(0px)){
  .auth-page,.main-container,.site-footer{
    padding-left:max(.9rem, env(safe-area-inset-left));
    padding-right:max(.9rem, env(safe-area-inset-right));
  }
}

/* ===== THEME: dark mode ===== */
:root{ color-scheme: light; }
:root,[data-theme="light"]{ color-scheme: light; }
[data-theme="dark"]{
  color-scheme: dark;
  --bg:#0b1020; --surface:#12172a; --surface-2:#141d33;
  --brand:#4f83ff; --brand-600:#3569ea; --brand-700:#2753c8;
  --text:#e9eefc; --muted:#9aa3b8;
  --ok:#16a085; --warn:#f6b454; --danger:#ff6b6b; --info:#54b6ff;
  --thead-bg:#1a2340; --row-hover:#0f1630; --border:#263251;
  --shadow:0 2px 10px rgba(0,0,0,.35);
}
[data-theme="dark"] .navbar,
[data-theme="dark"] .site-footer{
  background: linear-gradient(135deg, var(--brand-700), var(--brand-600));
}
[data-theme="dark"] input[type="text"],
[data-theme="dark"] input[type="number"],
[data-theme="dark"] input[type="date"],
[data-theme="dark"] select{
  background:#0e1427; color:var(--text); border-color:var(--border);
}
[data-theme="dark"] input:focus,
[data-theme="dark"] select:focus{
  box-shadow: 0 0 0 3px rgba(79,131,255,.25);
}
[data-theme="dark"] table{ background:var(--surface); color:var(--text); }
[data-theme="dark"] thead th{ background:var(--thead-bg); color:var(--text); border-color:var(--border); }
[data-theme="dark"] th,[data-theme="dark"] td{ border-color:var(--border); }
[data-theme="dark"] tbody tr:nth-child(even) td{ background:#0d142e; }
[data-theme="dark"] tbody tr:hover td{ background:#111a38; }
[data-theme="dark"] .mobile-menu-inner{ background:var(--surface); color:var(--text); }
[data-theme="dark"] .mobile-menu .nav-link{ color:var(--text); }

/* ===== Login page overrides (restaura look cómodo) ===== */
.auth-page{
  min-height: 100vh;
  display: grid;
  place-items: center;
  padding: clamp(16px, 3vh, 32px);
  background: radial-gradient(1200px 700px at 20% 10%, #12213f 0%, transparent 60%),
              radial-gradient(900px 600px at 80% 90%, #1b2c55 0%, transparent 60%),
              linear-gradient(160deg, #0b1020, #0f2856);
}

.login-container{
  width: 100%;
  max-width: 440px;               /* un pelín más ancho */
  background: #fff;
  color: var(--text);
  border-radius: 16px;
  padding: clamp(22px, 2.5vw, 28px);    /* padding fluido */
  box-shadow: 0 10px 20px rgba(0,0,0,.22), 0 1px 3px rgba(0,0,0,.12);
  border: 1px solid rgba(0,0,0,.04);
  backdrop-filter: blur(2px);
}

.login-container h2{
  margin: 0 0 12px 0;
  font-size: clamp(1.45rem, 1.1rem + 1vw, 1.7rem);
  font-weight: 800;
  letter-spacing: .2px;
  color: #0b1324;
}

/* Grilla y etiquetas */
.form-group{
  display: grid;
  gap: 8px;
  margin-bottom: 16px;
}
.form-group label{
  font-size: .95rem;
  color: #111827;
  font-weight: 600;
}

/* Inputs altos y cómodos solo en Login */
.login-container input[type="email"],
.login-container input[type="password"],
.login-container input[type="text"]{
  width: 100%;
  height: 46px;                      /* <-- altura restaurada */
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  padding: 0 12px;                   /* padding cómodo */
  font-size: 1rem;                   /* texto legible */
  color: var(--text);
  background: #fff;
  transition: border-color 120ms ease, box-shadow 120ms ease, transform 60ms ease;
}
.login-container input::placeholder{ color:#9aa3af; }
.login-container input:focus{
  outline: none;
  border-color: var(--brand);
  box-shadow: 0 0 0 4px rgba(37,99,235,.35);
}

/* Botón de enviar */
.login-btn{
  width: 100%;
  height: 48px;                      /* un poco más alto */
  border: none;
  border-radius: 10px;
  background: var(--brand);
  color: #fff;
  font-weight: 800;                  /* más presencia */
  letter-spacing: .3px;
  margin-top: 6px;
  transition: transform 60ms ease, background-color 120ms ease, box-shadow 120ms ease;
  box-shadow: 0 8px 18px rgba(37,99,235,.35);
  cursor: pointer;
}
.login-btn:hover{ background: var(--brand-600); }
.login-btn:active{ transform: translateY(1px); }

/* Mensajes */
.error-message,
.success-message{
  margin-top: 12px;
  border-radius: 10px;
  padding: 12px 14px;
  font-size: .95rem;
  line-height: 1.3;
}
.error-message{
  color: #fff;
  background: #e11d48; /* crimson-ish */
  border: 1px solid rgba(0,0,0,.05);
}
.success-message{
  color: #065f46;
  background: #d1fae5;
  border: 1px solid rgba(0,0,0,.05);
}

/* Links debajo del formulario */
.login-container a{
  color: var(--brand);
  font-weight: 700;
  text-decoration: none;
}
.login-container a:hover{ text-decoration: underline; }

/* Responsivo */
@media (max-width: 520px){
  .login-container{
    max-width: 94vw;
    padding: 20px;
    border-radius: 14px;
  }
  .login-btn{ height: 50px; }
}
.small-delta {
  font-size: 0.8rem;
  opacity: 0.7;
  margin-left: 6px;
  white-space: nowrap;
}
.small-delta.negative::before { content: '−'; }
.small-delta.positive::before { content: '+'; }
